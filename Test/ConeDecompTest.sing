if(!defined(Scheme))
{
    LIB "scheme.lib";
}
killall();

system("--ticks-per-sec",1000);

string s;
int dotiming=1;
int t;

//intmat H[5][3]=1,0,0,1,1,0,1,0,1,1,1,1,4,1,1;
int n_vec=20;
int d=8;
int b=20;
intvec v=b:(n_vec*d);
intmat H=random(b,n_vec,d)+intmat(v,n_vec,d);

/*if(dotiming)
{
    timer=0;
    t=timer;
}

def F=fanDecomposition(H);

if(dotiming)
{
    t=timer-t;

    s = "It took " + string(t div 60000) + " min ";
    t=t%60000;
    s = s + string(t div 1000) + " sec ";
    t=t%1000;
    s = s + string(t) + " ms";
    s;
}*/

//intvec P=2,1,1;
intvec P=0:d;
for(int i=1; i<=n_vec; i=i+1)
{
    v=random(0,b)*H[i,1..d];
    P=P+v;
}

if(dotiming)
{
    timer=0;
    t=timer;
}

def G=fanDecomposition(H,P);

if(dotiming)
{
    t=timer-t;

    s = "It took " + string(t div 60000) + " min ";
    t=t%60000;
    s = s + string(t div 1000) + " sec ";
    t=t%1000;
    s = s + string(t) + " ms";
    s;
}

